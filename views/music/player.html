<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Music Player</title>
    <link rel="stylesheet" href="../../assets/css/all.css">
    <link rel="stylesheet" href="../../assets/css/player.css">
</head>

<body>
    <div class="popup-player">
        <div class="player-left">
            <!-- 로고 -->
            <div class="logo">
                <img src="../../assets/images/logo.webp" alt="logo" style="height: 50px;">
            </div>

            <!-- 앨범 커버, 곡 제목, 가수 이름 -->
            <div class="album-info">
                <div class="clearfix">
                    <div>
                        <h2>곡 제목</h2>
                        <p>가수 이름</p>
                    </div>
                    <div class="like-icon">
                        <span>&hearts;</span>
                    </div>
                </div>
                <img src="../../assets/images/공포 루피.jfif" alt="Album Cover" class="album-cover">

            </div>

            <!-- 음악 컨트롤러 -->
            <audio id="audio-player" controls>
                <source id="audio-source" src="../../assets/musicfile/Color_Out_-_Host.mp3" type="audio/mp3">
            </audio>
        </div>

        <div class="playlist-right">
            <div class="user-info">
                <span class="user-id">ihs*** 님</span>
                <button class="logout-btn">로그아웃</button>
            </div>

            <!-- 탭 버튼들 -->
            <div class="tab-header">
                <button id="playlist-tab" class="tab-button active">재생목록 (7)</button>
                <button id="my-music-tab" class="tab-button">마이뮤직</button>
            </div>

            <!-- 재생목록 -->
            <div id="playlist-content" class="tab-content active">
                <ul class="playlist" id="playlist">
                    <!-- Mock 데이터가 동적으로 여기에 추가됨 -->
                </ul>
                <div class="playlist-footer">
                    <button>담기</button>
                    <button>삭제</button>
                    <p id="song-count">0곡 / 1곡</p>
                </div>
            </div>

            <!-- 마이뮤직 -->
            <div id="my-music-content" class="tab-content">
                <ul class="playlist" id="my-music">
                    <li><input type="checkbox"> 나의 음악 1</li>
                    <li><input type="checkbox"> 나의 음악 2</li>
                    <li><input type="checkbox"> 나의 음악 3</li>
                </ul>
                <div class="playlist-footer">
                    <button>삭제</button>
                    <p>0곡 / 3곡</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const playlistTab = document.getElementById('playlist-tab');
        const myMusicTab = document.getElementById('my-music-tab');
        const playlistContent = document.getElementById('playlist-content');
        const myMusicContent = document.getElementById('my-music-content');
        const playlist = document.getElementById('playlist');
        const currentSongDisplay = document.getElementById('current-song');
        const audioPlayer = document.getElementById('audio-player');
        const audioSource = document.getElementById('audio-source');
        const volumeSlider = document.getElementById('volume-slider');
        const songCount = document.getElementById('song-count');
        const tabs = document.querySelectorAll('.tab-button');
        const contents = document.querySelectorAll('.tab-content');

        // 음량 슬라이더 값 변경 시 실행되는 함수
        volumeSlider.addEventListener('input', function () {
            audioPlayer.volume = volumeSlider.value;
        });

        // Mock 데이터 (나중에 실제 API로 대체 가능)
        const songs = [
            { id: 1, title: "HAPPY", artist: "DAY6", url: "song1.mp3" },
            { id: 2, title: "Welcome to the Show", artist: "DAY6", url: "song2.mp3" },
            { id: 3, title: "한 페이지가 될 수 있게", artist: "DAY6", url: "song3.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 5, title: "소나기", artist: "이클립스", url: "song5.mp3" }
        ];

        // 재생 목록 생성
        function loadPlaylist() {
            playlist.innerHTML = ''; // 초기화
            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<input type="checkbox"> ${song.title} - ${song.artist} <button data-index="${index}" class="play-btn">재생</button>`;
                playlist.appendChild(li);
            });
            updateSongCount();
        }

        // 노래 재생
        function playSong(index) {
            const song = songs[index];
            audioSource.src = song.url;
            audioPlayer.load();
            audioPlayer.play();
            currentSongDisplay.textContent = `${song.title} - ${song.artist}`;
        }

        // 재생 버튼 클릭 이벤트
        playlist.addEventListener('click', function (e) {
            if (e.target.classList.contains('play-btn')) {
                const index = e.target.getAttribute('data-index');
                playSong(index);
            }
        });

        // 탭 전환 기능
        tabs.forEach((tab, index) => {
            tab.addEventListener('click', function () {
                // 모든 탭에서 active 클래스를 제거
                tabs.forEach((tab) => tab.classList.remove('active'));
                contents.forEach((content) => content.classList.remove('active'));

                // 클릭된 탭과 관련된 콘텐츠에 active 클래스 추가
                tab.classList.add('active');
                contents[index].classList.add('active');
            });
        });

<<<<<<< HEAD
        myMusicTab.addEventListener('click', function () {
            myMusicTab.classList.add('active');
            playlistTab.classList.remove('active');

            myMusicContent.classList.add('active');
            playlistContent.classList.remove('active');
        });
    
        // 음량 슬라이더 변경 시
        volumeSlider.addEventListener('input', function () {
            audioPlayer.volume = volumeSlider.value;
        });

        // URL에서 쿼리 파라미터 읽어오기
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
=======
        // 현재 재생목록 곡 수 업데이트
        function updateSongCount() {
            const songCountValue = playlist.querySelectorAll('li').length;
            songCount.textContent = `${songCountValue}곡 / ${songs.length}곡`;
>>>>>>> 8c46db830bc1e51173745953228b85243c0abc42
        }

        // 페이지 로드 시 재생 목록 로드
        window.onload = function () {
            loadPlaylist();
        };
    </script>

</body>

</html>